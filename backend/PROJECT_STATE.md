# Cleaning SaaS ‚Äî FACTUAL PROJECT STATE (v6.1)

–§–æ—Ä–º–∞—Ç:
‚úÖ —Å–¥–µ–ª–∞–Ω–æ‚ÄÉüü° —á–∞—Å—Ç–∏—á–Ω–æ / –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ‚ÄÉ‚õî –Ω–µ –¥–µ–ª–∞–ª–∏

–î–æ–∫—É–º–µ–Ω—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç **—Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è**, –±–µ–∑ –ø–ª–∞–Ω–æ–≤, –≥–∏–ø–æ—Ç–µ–∑ –∏ –¥–æ—Ä–æ–∂–Ω—ã—Ö –∫–∞—Ä—Ç.

---

## üß† –°–õ–û–ô 0 ‚Äî –Ø–î–†–û (Backend + Manager Portal)

### Backend (Django, API-first)

**Core execution**

* Jobs (–º–æ–¥–µ–ª—å, —Å–≤—è–∑–∏, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞) ‚úÖ
* Status flow: `scheduled ‚Üí in_progress ‚Üí completed` ‚úÖ
* Check-in / Check-out

  * GPS
  * distance validation ‚úÖ
* Checklist

  * JobChecklistItem
  * required items
  * toggle / bulk update ‚úÖ
* Photos before / after

  * EXIF extraction
  * distance validation
  * normalization to JPEG
  * storage + File model
  * —Å–≤—è–∑—å —Å Job ‚úÖ
* Audit trail (JobCheckEvent) ‚úÖ
* PDF report

  * —Ä–µ–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∏–Ω–∞—Ä–Ω–æ–≥–æ PDF
  * —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/jobs/<id>/report/pdf/`
  * –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏, —á—Ç–æ UI ‚úÖ

üëâ **Backend-—è–¥—Ä–æ –¥–ª—è job execution –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç–æ.**

---

### Backend ‚Äî Trial & Usage Layer

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

üëâ Trial / usage-—Å–ª–æ–π ‚Äî **backend source of truth + —Ä–µ–∞–ª—å–Ω–æ–µ enforcement –ø–æ –ª–∏–º–∏—Ç–∞–º trial.**

---

### Manager Portal (Web)

#### Jobs / Execution

* Today Jobs (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ Jobs, –¥–∞–Ω–Ω—ã–µ —Å API) ‚úÖ
* Job Details (manager view) ‚úÖ

  * —Ç–∞–π–º–ª–∞–π–Ω –∏–∑ `check_events`, —Ñ–æ—Ç–æ –∏ —á–µ–∫–ª–∏—Å—Ç–∞ ‚úÖ
  * —Ñ–æ—Ç–æ before / after –∏–∑ JobPhoto ‚úÖ
  * —á–µ–∫–ª–∏—Å—Ç read-only + —Å—Ç–∞—Ç—É—Å –≤ —Ç–∞–π–º–ª–∞–π–Ω–µ ‚úÖ
  * GPS check-in/out + ‚ÄúOpen in Maps‚Äù ‚úÖ
  * Generate PDF ‚Äî —Ä–µ–∞–ª—å–Ω—ã–π PDF —Å backend ‚úÖ
  * Download PDF ‚Äî –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚úÖ
  * Email PDF ‚Äî **—Ä–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ PDF –Ω–∞ email** ‚úÖ

    * endpoint: `POST /api/manager/jobs/<id>/report/email/`
    * PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–µ–º –∂–µ backend-–∫–æ–¥–æ–º, —á—Ç–æ –∏ Download PDF (single source of truth)
    * –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã–±–æ—Ä–∞ email:

      * –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `request.user.email`
      * –∫–∞—Å—Ç–æ–º–Ω—ã–π email –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ `{ "email": "..." }` ‚úÖ
    * UI: –º–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è (self / custom email) ‚úÖ
    * –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ / –æ—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è inline (–±–µ–∑ alert-–æ–≤) ‚úÖ
    * –∫–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è (—Å–º. –Ω–∏–∂–µ) ‚úÖ

---

### Job Planning

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

üëâ Job Planning —Ä–∞–±–æ—Ç–∞–µ—Ç **end-to-end**: API ‚Üí UI ‚Üí Create Job ‚Üí refetch —Å–ø–∏—Å–∫–∞.

---

### Job History

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

---

### Performance Layer (SLA aggregation v1.5 ‚Üí Reports v2)

**Backend**

* `/api/manager/performance/?date_from=&date_to=` ‚úÖ
* SLA aggregation endpoints:

  * `/api/manager/reports/weekly/` ‚úÖ
  * `/api/manager/reports/monthly/` ‚úÖ
* Reports PDF export:

  * `/api/manager/reports/weekly/pdf/` ‚úÖ
  * `/api/manager/reports/monthly/pdf/` ‚úÖ
* Reports email:

  * `/api/manager/reports/weekly/email/` ‚úÖ
  * `/api/manager/reports/monthly/email/` ‚úÖ
  * –ø—Ä–∏–Ω–∏–º–∞—é—Ç JSON —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø–æ–ª–µ–º `email`
  * –µ—Å–ª–∏ email –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `request.user.email`
  * —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Ç–æ—Ç –∂–µ PDF, —á—Ç–æ –∏ `/pdf/`
  * **—Ä–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Django Email backend** (SMTP / dev backend) ‚úÖ
  * **–∫–∞–∂–¥–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –ë–î** ‚úÖ

#### ReportEmailLog (NEW ‚Äî Reports v2)

* –º–æ–¥–µ–ª—å `ReportEmailLog` ‚úÖ

  * `company`
  * `user` (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä)
  * `kind`: `job_report / weekly_report / monthly_report`
  * `job` (–¥–ª—è job reports)
  * `period_from / period_to` (–¥–ª—è weekly/monthly)
  * `to_email`
  * `subject`
  * `status`: `sent / failed`
  * `error_message`
  * `created_at`
* –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

  * Job PDF email ‚úÖ
  * Weekly report email ‚úÖ
  * Monthly report email ‚úÖ
* –¥–æ—Å—Ç—É–ø–Ω–æ –≤ Django Admin (—Ñ–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫, —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è) ‚úÖ

---

**Frontend**

* `/performance` ‚úÖ
* `/reports` ‚úÖ

  * –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Weekly / Monthly (frontend state only) ‚úÖ
  * summary-–±–ª–æ–∫, —Ç–∞–±–ª–∏—Ü—ã, top reasons ‚úÖ
  * –Ω–∞–≤–∏–≥–∞—Ü–∏—è ‚ÄúView jobs‚Äù ‚Üí Job History —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ ‚úÖ
* Reports PDF:

  * –∫–Ω–æ–ø–∫–∞ **Download PDF** –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ backend ‚úÖ
* Reports email (Reports v2):

  * –∫–Ω–æ–ø–∫–∞ **Email report** ‚úÖ
  * –º–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:

    * ‚ÄúSend to my email‚Äù
    * ‚ÄúSend to another email‚Äù + input ‚úÖ
  * –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π UI feedback (loading / success / error) ‚úÖ
  * –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ª—é–±–æ–π email, –≤–≤–µ–¥—ë–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º (SMTP-–∑–∞–≤–∏—Å–∏–º–æ) ‚úÖ

üëâ Performance Layer –∑–∞–º–∫–Ω—É—Ç end-to-end:
**Execution ‚Üí SLA ‚Üí Reports ‚Üí PDF ‚Üí Email ‚Üí Audit log**

---

### Trial UX (Manager Dashboard & Settings)

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

üëâ Trial UX ‚Äî **–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ª–æ–π, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ backend.**

---

### Commercial enforcement & read-only mode (Manager Portal)

**Backend**

* –î–æ–±–∞–≤–ª–µ–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∫–æ–º–ø–∞–Ω–∏–∏ (`Company.is_active`, `suspended_at`, `suspended_reason`) ‚úÖ
* Backend-permissions –∑–∞–ø—Ä–µ—â–∞—é—Ç mutating-–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è suspended –∫–æ–º–ø–∞–Ω–∏–π (`company_blocked`) ‚úÖ
* API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫:

  * `company_blocked` ‚Äî –∫–æ–º–ø–∞–Ω–∏—è –≤ read-only —Ä–µ–∂–∏–º–µ
  * `trial_expired` ‚Äî trial –∑–∞–≤–µ—Ä—à—ë–Ω

üëâ Backend –æ—Å—Ç–∞—ë—Ç—Å—è **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã** –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.

**Frontend (Manager Portal)**

* Create Job:

  * –ø—Ä–∏ `company_blocked`:
    * —Å–æ–∑–¥–∞–Ω–∏–µ job –∑–∞–ø—Ä–µ—â–µ–Ω–æ backend‚Äô–æ–º (403)
    * UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **read-only warning** (‚ö†Ô∏è Account suspended)
    * –¥–∞–Ω–Ω—ã–µ (jobs, reports) –æ—Å—Ç–∞—é—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏
    * –∫–Ω–æ–ø–∫–∞ Create Job –¥–∏–∑–µ–π–±–ª–∏—Ç—Å—è –∏ –º–µ–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç ‚úÖ
  * –ø—Ä–∏ `trial_expired`:
    * –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–ø–≥—Ä–µ–π–¥–∞ ‚úÖ
* –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ **machine-readable `code`**, –±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–∞ ‚úÖ

üëâ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π **read-only —Ä–µ–∂–∏–º –¥–ª—è suspended –∫–æ–º–ø–∞–Ω–∏–π**:
–¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã, —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –∑–∞–ø—Ä–µ—â–µ–Ω–æ, UX –Ω–µ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ—à–∏–±–∫–∞.

### üîç Reports ‚Üí Evidence (SLA drill-down, v1)

**Backend**

* Endpoint –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –æ—Ç –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º job‚Äô–∞–º –ø–æ SLA-reason ‚úÖ

  * `GET /api/manager/reports/violations/jobs/` ‚úÖ
  * query params:

    * `reason`
    * `period_start`
    * `period_end`
  * –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

    * `reason`, `reason_label`
    * `period`
    * –ø–∞–≥–∏–Ω–∞—Ü–∏—é
    * —Å–ø–∏—Å–æ–∫ `jobs` —Å:

      * id
      * scheduled_date
      * cleaner
      * location
      * SLA status / reasons ‚úÖ
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç—É –∂–µ SLA-–ª–æ–≥–∏–∫—É**, —á—Ç–æ Performance / Reports (single source of truth) ‚úÖ
* Read-only, –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ execution –∏–ª–∏ —Å—Ç–∞—Ç—É—Å job‚Äô–æ–≤ ‚úÖ

**Frontend**

* –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/reports/violations` ‚úÖ
* –≠–∫—Ä–∞–Ω `ViolationJobsPage` (drill-down —É—Ä–æ–≤–µ–Ω—å) ‚úÖ

  * —á–∏—Ç–∞–µ—Ç query params (`reason`, `period_start`, `period_end`)
  * –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç backend endpoint
  * –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ job‚Äô–æ–≤ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º SLA-–Ω–∞—Ä—É—à–µ–Ω–∏–µ–º
  * –ø–µ—Ä–µ—Ö–æ–¥ **View job** ‚Üí —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `/jobs/:id` ‚úÖ
* –≠–∫—Ä–∞–Ω **–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** –∏ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ (intentional UX) ‚úÖ

**Product behavior**

* Reports ‚Üí Evidence —Å–ª–æ–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ **—É—Å–ª–æ–≤–Ω—ã–π —ç–∫—Ä–∞–Ω**:

  * –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ SLA-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  * –Ω–µ —Å–æ–∑–¥–∞—ë—Ç UI-—à—É–º–∞
* –í —Ç–µ–∫—É—â–µ–º mobile-UX:

  * job –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ–æ—Ç–æ / —á–µ–∫–ª–∏—Å—Ç–∞
  * –ø–æ—ç—Ç–æ–º—É `missing_*` SLA-reasons –≤ –ø—Ä–æ–¥-—Ñ–ª–æ—É –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Ä–µ–¥–∫–æ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
* SLA-reasons –ø–æ proof –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ **–¥–æ–º–µ–Ω–Ω—ã–π –∑–∞–¥–µ–ª**:

  * –¥–ª—è future overrides (manager force complete)
  * –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–ª–∏—Ç–∏–∫–∏ (photo optional)
  * –¥–ª—è –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö / legacy –¥–∞–Ω–Ω—ã—Ö ‚úÖ

üëâ **Reports ‚Üí Evidence —Å–ª–æ–π –∑–∞–∫—Ä—ã—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ**:
–∞–≥—Ä–µ–≥–∞—Ç ‚Üí reason ‚Üí –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ job‚Äô—ã ‚Üí job details, –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ –∏ –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ execution.

---
## Reports & PDF generation are complete and stable.

- Weekly and monthly SLA PDF reports are available via manager actions.
- PDFs include owner-level aggregates and narrative summary.
- Owner overview is implemented as an in-app dashboard using the same data.
- No separate owner-specific PDF exists by design.

This behavior is intentional and aligned with the current product scope.

---
## Checklist Templates

ChecklistTemplate / ChecklistTemplateItem ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ‚úÖ
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö —á–µ–∫-–ª–∏—Å—Ç–æ–≤ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ ‚úÖ
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é items ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ ‚úÖ
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Create Job (Manager Meta API) ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ ‚úÖ
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —á–µ–∫-–ª–∏—Å—Ç–æ–≤ –±–µ–∑ fallback-–ª–æ–≥–∏–∫–∏ ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
–ë–ª–æ–∫ —á–µ–∫-–ª–∏—Å—Ç–æ–≤ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º –≤ —Ä–∞–º–∫–∞—Ö MVP.

## Checklist templates & job checklist ‚Äî status

‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

–¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ checklist templates —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏;
–≤—ã–±–æ—Ä checklist template –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ job;
–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ–∫–ª–∏—Å—Ç–∞ job –∏–∑ —à–∞–±–ª–æ–Ω–∞;
–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–∫–ª–∏—Å—Ç–∞ –∏ –µ–≥–æ –ø—É–Ω–∫—Ç–æ–≤ –≤ JobSidePanel;
–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π Pending vs Not completed;
—É—á—ë—Ç —á–µ–∫–ª–∏—Å—Ç–∞ –≤ SLA –∏ violation logic;
–≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å–≤—è–∑–∫–∞ Planning ‚Üí Job ‚Üí Checklist ‚Üí SLA.

üîí –õ–æ–≥–∏–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞, –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞. –ë–ª–æ–∫ —á–µ–∫–ª–∏—Å—Ç–æ–≤ –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –∑–∞–∫—Ä—ã—Ç—ã–º –∏ –≥–æ—Ç–æ–≤—ã–º –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–µ.

#### Job Planning ‚Äî checklist templates (meta + UI)

‚úÖ Backend:
* —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ö–µ–ª–ø–µ—Ä `create_default_checklist_templates_for_company(company)` ‚Äî –ª–µ–Ω–∏–≤–æ —Å–æ–∑–¥–∞—ë—Ç 4 –±–∞–∑–æ–≤—ã—Ö —á–µ–∫–ª–∏—Å—Ç-—à–∞–±–ª–æ–Ω–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏, –µ—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ —Å –ø—É–Ω–∫—Ç–∞–º–∏;
* `GET /api/manager/meta/` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤–∞–ª–∏–¥–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –≤ –ø–æ–ª–µ `checklist_templates` —Å –ø–æ–ª—è–º–∏ `id`, `name`, `description`, `items_preview`, `items_count`.

‚úÖ Frontend:
* `fetchPlanningMeta()` —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç `PlanningMeta.checklist_templates`;
* –≤ `CreateJobDrawer`:
  * —Å–µ–ª–µ–∫—Ç —á–µ–∫–ª–∏—Å—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ + –ø—Ä–µ–≤—å—é –ø–µ—Ä–≤—ã—Ö –ø—É–Ω–∫—Ç–æ–≤;
  * –Ω–∏–∂–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –±–ª–æ–∫ ‚ÄúCHECKLIST DETAILS‚Äù —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–º —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ (`+ N more items` ‚Üí —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ).

üü° –°–ª–µ–¥—É—é—â–∏–π —Å–ª–æ–π (–ø–æ–∑–∂–µ):
* –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–µ–∫–ª–∏—Å—Ç-—à–∞–±–ª–æ–Ω–∞ –∏ –µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ (completed/pending) –≤ job-–∫–∞—Ä—Ç–∞—Ö –∏ –æ—Ç—á—ë—Ç–∞—Ö (PDF/History).

---
## Cleaner authentication

Phone + PIN login ‚Äî 
Manager creates cleaner accounts ‚Äî ‚úÖ
PIN reset by manager only ‚Äî ‚úÖ
Secure PIN visibility (shown once on create/reset) ‚Äî ‚úÖ
No self-service recovery for cleaners (by design) ‚Äî ‚úÖ
---
üëâ **–°—Ç–∞—Ç—É—Å —Å–ª–æ—è 0: DONE ‚úÖ**


## Job PDF (v1) ‚úÖ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Job PDF —Å –ø–æ–ª–Ω–æ–π –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π: summary, notes, photos (before/after), checklist, audit events –∏ SLA & Proof.
SLA-–±–ª–æ–∫ –≤ PDF –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–π backend source of truth –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å ok / violated.
Mobile enforcement –∏—Å–∫–ª—é—á–∞–µ—Ç SLA-–Ω–∞—Ä—É—à–µ–Ω–∏—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Ñ–ª–æ—É, —á—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º.
Weekly / Monthly SLA reports –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã.

## Job PDF Email (v1) ‚úÖ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ Job PDF –ø–æ email —Å –±–∏–∑–Ω–µ—Å-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –ø–∏—Å—å–º–∞.
–ö–∞–∂–¥–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.
Email —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç job, SLA —Å—Ç–∞—Ç—É—Å –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤.

## PDF Reports & Email Logging

‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
–≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF job report;
—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF;
–æ—Ç–ø—Ä–∞–≤–∫–∞ PDF –ø–æ email;
–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ email-–æ—Ç–ø—Ä–∞–≤–æ–∫ (job-level);
–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ email-–æ—Ç–ø—Ä–∞–≤–æ–∫ –≤ Job Details UI.

üü° –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ):
–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ email-–æ—Ç–ø—Ä–∞–≤–∫–∞–º;
—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥—É / –∫–∞–ª–µ–Ω–¥–∞—Ä—é;
–æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–ª–∏ –≤–∫–ª–∞–¥–∫–∞ –≤ Reports –¥–ª—è email-proof.

‚è≠ –°–ª–µ–¥—É—é—â–∏–π –ª–æ–≥–∏—á–Ω—ã–π —à–∞–≥:
–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ –≤ Reports —Å –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º –∏ —Ç–∞–±–ª–∏—Ü–µ–π email-–æ—Ç–ø—Ä–∞–≤–æ–∫ (–∫—Ç–æ, –∫–æ–≥–¥–∞, –ø–æ –∫–∞–∫–∏–º job / cleaners –æ—Ç–ø—Ä–∞–≤–ª—è–ª –∏–ª–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª –æ—Ç—á—ë—Ç—ã).

## Email history ‚Äî implementation status

‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω –±–ª–æ–∫ Email history –≤ —Ä–∞–∑–¥–µ–ª–µ Reports. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –µ–¥–∏–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email-–æ—Ç—á—ë—Ç–æ–≤ (job, weekly, monthly) —Å —Ä–∞–±–æ—á–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç, —Å—Ç–∞—Ç—É—Å–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π. –§—Ä–æ–Ω—Ç –∏ –±—ç–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—É. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–∞—Ç–∞–º (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è created_at). –†–∞–∑–¥–µ–ª —Å—Ç–∞–±–∏–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫–∞–∫ —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–π –∏ –∞—É–¥–∏—Ç–æ—Ä—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.

Job Timeline & SLA ‚Äî current state ‚úÖ

Job Timeline shows full execution flow.
‚ÄúViolations-only‚Äù filter is implemented as an audit tool.
Cleaner-side execution prevents incomplete jobs by design.
Empty violations timeline correctly represents a fully compliant job.

UI behavior confirmed for both:
jobs with full proof,
jobs with missing/exceptional events.

This logic is considered final for V1/V1.5 and forms the basis for upcoming features:
Force complete / override flow
Enterprise SLA audit extensions
---

## üì± –°–õ–û–ô 1 ‚Äî –ò–°–ü–û–õ–ù–ï–ù–ò–ï (Mobile Cleaner App)

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)*

üëâ **–°—Ç–∞—Ç—É—Å —Å–ª–æ—è 1:** —Ä–∞–±–æ—á–∏–π MVP üü°

---

## üßë‚Äçüíº –°–õ–û–ô 2 ‚Äî –£–ü–†–ê–í–õ–ï–ù–ò–ï

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

---

## üí≥ –°–õ–û–ô 3 ‚Äî –ö–û–ú–ú–ï–†–¶–ò–Ø

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)*

---

## üåç –°–õ–û–ô 4 ‚Äî –ú–ê–†–ö–ï–¢–ò–ù–ì

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)*

---

## üìä –°–õ–û–ô 5 ‚Äî –ú–ê–°–®–¢–ê–ë

* Performance aggregation (SLA-based) ‚úÖ
* Performance reports (UI + PDF + Email + audit log) ‚úÖ
* –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚õî
* Multi-company roles ‚õî
* Audit exports ‚õî

---

## ‚ö†Ô∏è Known limitations (as of today)

* –ù–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±–∏–ª–ª–∏–Ω–≥–∞ –∏ –ø–ª–∞—Ç–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤.
* Trial-–ª–∏–º–∏—Ç—ã –¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ jobs –∏ cleaners.
* Mobile camera UX —Ç—Ä–µ–±—É–µ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏.
* Locations –±–µ–∑ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ñ–∏—á.
* **Email-–¥–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ SMTP (`EMAIL_BACKEND`)**:

  * –ª–æ–≥–∏–∫–∞ –∏ UX —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é
  * —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

---

## –ò—Ç–æ–≥ ‚Äî –∫–æ—Ä–æ—Ç–∫–æ –∏ —á–µ—Å—Ç–Ω–æ

* Reports v2 **—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é**:

  * –≤—ã–±–æ—Ä email
  * —Ä–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
  * –∞—É–¥–∏—Ç –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
* –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—Ç—á—ë—Ç–æ–≤ –∑–∞–∫—Ä—ã—Ç–∞ –±–µ–∑ –∫–æ—Å—Ç—ã–ª–µ–π.
* –ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ **–≥–æ—Ç–æ–≤–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ SaaS –±–µ–∑ –±–∏–ª–ª–∏–Ω–≥–∞**, –Ω–æ —Å —Ä–µ–∞–ª—å–Ω–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç—å—é.

---

## –ò—Ç–æ–≥ ‚Äî –∫–æ—Ä–æ—Ç–∫–æ –∏ —á–µ—Å—Ç–Ω–æ

* –°–ª–æ–π 0 ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç ‚úÖ
* –°–ª–æ–π 1 ‚Äî —Ä–∞–±–æ—á–∏–π MVP üü°
* –°–ª–æ–π 2 ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–±–∏–ª–µ–Ω ‚úÖ
* –°–ª–æ–π 3 ‚Äî –≥–æ—Ç–æ–≤ –∫ –±–∏–ª–ª–∏–Ω–≥—É, –Ω–æ –±–µ–∑ –ø–ª–∞—Ç–µ–∂–µ–π
* –°–ª–æ–∏ 4‚Äì5 ‚Äî –±–∞–∑–æ–≤—ã–µ –∑–∞–≥–æ—Ç–æ–≤–∫–∏, –Ω–æ Performance / Reports —É–∂–µ –¥–∞—é—Ç —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å ‚úÖ

üëâ **–ü—Ä–æ–µ–∫—Ç ‚Äî —É—Å—Ç–æ–π—á–∏–≤—ã–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∫–∞—á–µ—Å—Ç–≤–∞ (micro-SLA v1 + reason codes), trial-–æ–Ω–±–æ—Ä–¥–∏–Ω–≥–æ–º –∏ self-serve signup, –Ω–æ –±–µ–∑ –±–∏–ª–ª–∏–Ω–≥–∞.**
