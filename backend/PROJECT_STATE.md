# Cleaning SaaS ‚Äî FACTUAL PROJECT STATE (v6.1)

–§–æ—Ä–º–∞—Ç:
‚úÖ —Å–¥–µ–ª–∞–Ω–æ‚ÄÉüü° —á–∞—Å—Ç–∏—á–Ω–æ / –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ‚ÄÉ‚õî –Ω–µ –¥–µ–ª–∞–ª–∏

–î–æ–∫—É–º–µ–Ω—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç **—Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è**, –±–µ–∑ –ø–ª–∞–Ω–æ–≤, –≥–∏–ø–æ—Ç–µ–∑ –∏ –¥–æ—Ä–æ–∂–Ω—ã—Ö –∫–∞—Ä—Ç.

---

## üß† –°–õ–û–ô 0 ‚Äî –Ø–î–†–û (Backend + Manager Portal)

### Backend (Django, API-first)

**Core execution**

* Jobs (–º–æ–¥–µ–ª—å, —Å–≤—è–∑–∏, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞) ‚úÖ
* Status flow: `scheduled ‚Üí in_progress ‚Üí completed` ‚úÖ
* Check-in / Check-out

  * GPS
  * distance validation ‚úÖ
* Checklist

  * JobChecklistItem
  * required items
  * toggle / bulk update ‚úÖ
* Photos before / after

  * EXIF extraction
  * distance validation
  * normalization to JPEG
  * storage + File model
  * —Å–≤—è–∑—å —Å Job ‚úÖ
* Audit trail (JobCheckEvent) ‚úÖ
* PDF report

  * —Ä–µ–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∏–Ω–∞—Ä–Ω–æ–≥–æ PDF
  * —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/jobs/<id>/report/pdf/`
  * –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏, —á—Ç–æ UI ‚úÖ

üëâ **Backend-—è–¥—Ä–æ –¥–ª—è job execution –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç–æ.**

---

### Backend ‚Äî Trial & Usage Layer

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

üëâ Trial / usage-—Å–ª–æ–π ‚Äî **backend source of truth + —Ä–µ–∞–ª—å–Ω–æ–µ enforcement –ø–æ –ª–∏–º–∏—Ç–∞–º trial.**

---

### Manager Portal (Web)

#### Jobs / Execution

* Today Jobs (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ Jobs, –¥–∞–Ω–Ω—ã–µ —Å API) ‚úÖ
* Job Details (manager view) ‚úÖ

  * —Ç–∞–π–º–ª–∞–π–Ω –∏–∑ `check_events`, —Ñ–æ—Ç–æ –∏ —á–µ–∫–ª–∏—Å—Ç–∞ ‚úÖ
  * —Ñ–æ—Ç–æ before / after –∏–∑ JobPhoto ‚úÖ
  * —á–µ–∫–ª–∏—Å—Ç read-only + —Å—Ç–∞—Ç—É—Å –≤ —Ç–∞–π–º–ª–∞–π–Ω–µ ‚úÖ
  * GPS check-in/out + ‚ÄúOpen in Maps‚Äù ‚úÖ
  * Generate PDF ‚Äî —Ä–µ–∞–ª—å–Ω—ã–π PDF —Å backend ‚úÖ
  * Download PDF ‚Äî –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚úÖ
  * Email PDF ‚Äî **—Ä–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ PDF –Ω–∞ email** ‚úÖ

    * endpoint: `POST /api/manager/jobs/<id>/report/email/`
    * PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–µ–º –∂–µ backend-–∫–æ–¥–æ–º, —á—Ç–æ –∏ Download PDF (single source of truth)
    * –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã–±–æ—Ä–∞ email:

      * –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `request.user.email`
      * –∫–∞—Å—Ç–æ–º–Ω—ã–π email –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ `{ "email": "..." }` ‚úÖ
    * UI: –º–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è (self / custom email) ‚úÖ
    * –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ / –æ—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è inline (–±–µ–∑ alert-–æ–≤) ‚úÖ
    * –∫–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è (—Å–º. –Ω–∏–∂–µ) ‚úÖ

---

### Job Planning

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

üëâ Job Planning —Ä–∞–±–æ—Ç–∞–µ—Ç **end-to-end**: API ‚Üí UI ‚Üí Create Job ‚Üí refetch —Å–ø–∏—Å–∫–∞.

---

### Job History

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

---

### Performance Layer (SLA aggregation v1.5 ‚Üí Reports v2)

**Backend**

* `/api/manager/performance/?date_from=&date_to=` ‚úÖ
* SLA aggregation endpoints:

  * `/api/manager/reports/weekly/` ‚úÖ
  * `/api/manager/reports/monthly/` ‚úÖ
* Reports PDF export:

  * `/api/manager/reports/weekly/pdf/` ‚úÖ
  * `/api/manager/reports/monthly/pdf/` ‚úÖ
* Reports email:

  * `/api/manager/reports/weekly/email/` ‚úÖ
  * `/api/manager/reports/monthly/email/` ‚úÖ
  * –ø—Ä–∏–Ω–∏–º–∞—é—Ç JSON —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø–æ–ª–µ–º `email`
  * –µ—Å–ª–∏ email –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `request.user.email`
  * —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Ç–æ—Ç –∂–µ PDF, —á—Ç–æ –∏ `/pdf/`
  * **—Ä–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Django Email backend** (SMTP / dev backend) ‚úÖ
  * **–∫–∞–∂–¥–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –ë–î** ‚úÖ

#### ReportEmailLog (NEW ‚Äî Reports v2)

* –º–æ–¥–µ–ª—å `ReportEmailLog` ‚úÖ

  * `company`
  * `user` (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä)
  * `kind`: `job_report / weekly_report / monthly_report`
  * `job` (–¥–ª—è job reports)
  * `period_from / period_to` (–¥–ª—è weekly/monthly)
  * `to_email`
  * `subject`
  * `status`: `sent / failed`
  * `error_message`
  * `created_at`
* –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

  * Job PDF email ‚úÖ
  * Weekly report email ‚úÖ
  * Monthly report email ‚úÖ
* –¥–æ—Å—Ç—É–ø–Ω–æ –≤ Django Admin (—Ñ–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫, —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è) ‚úÖ

---

**Frontend**

* `/performance` ‚úÖ
* `/reports` ‚úÖ

  * –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Weekly / Monthly (frontend state only) ‚úÖ
  * summary-–±–ª–æ–∫, —Ç–∞–±–ª–∏—Ü—ã, top reasons ‚úÖ
  * –Ω–∞–≤–∏–≥–∞—Ü–∏—è ‚ÄúView jobs‚Äù ‚Üí Job History —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ ‚úÖ
* Reports PDF:

  * –∫–Ω–æ–ø–∫–∞ **Download PDF** –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ backend ‚úÖ
* Reports email (Reports v2):

  * –∫–Ω–æ–ø–∫–∞ **Email report** ‚úÖ
  * –º–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:

    * ‚ÄúSend to my email‚Äù
    * ‚ÄúSend to another email‚Äù + input ‚úÖ
  * –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π UI feedback (loading / success / error) ‚úÖ
  * –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ª—é–±–æ–π email, –≤–≤–µ–¥—ë–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º (SMTP-–∑–∞–≤–∏—Å–∏–º–æ) ‚úÖ

üëâ Performance Layer –∑–∞–º–∫–Ω—É—Ç end-to-end:
**Execution ‚Üí SLA ‚Üí Reports ‚Üí PDF ‚Üí Email ‚Üí Audit log**

---

### Trial UX (Manager Dashboard & Settings)

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

üëâ Trial UX ‚Äî **–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ª–æ–π, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ backend.**

---

üëâ **–°—Ç–∞—Ç—É—Å —Å–ª–æ—è 0: DONE ‚úÖ**

---

## üì± –°–õ–û–ô 1 ‚Äî –ò–°–ü–û–õ–ù–ï–ù–ò–ï (Mobile Cleaner App)

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)*

üëâ **–°—Ç–∞—Ç—É—Å —Å–ª–æ—è 1:** —Ä–∞–±–æ—á–∏–π MVP üü°

---

## üßë‚Äçüíº –°–õ–û–ô 2 ‚Äî –£–ü–†–ê–í–õ–ï–ù–ò–ï

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)*

---

## üí≥ –°–õ–û–ô 3 ‚Äî –ö–û–ú–ú–ï–†–¶–ò–Ø

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)*

---

## üåç –°–õ–û–ô 4 ‚Äî –ú–ê–†–ö–ï–¢–ò–ù–ì

*(–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)*

---

## üìä –°–õ–û–ô 5 ‚Äî –ú–ê–°–®–¢–ê–ë

* Performance aggregation (SLA-based) ‚úÖ
* Performance reports (UI + PDF + Email + audit log) ‚úÖ
* –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚õî
* Multi-company roles ‚õî
* Audit exports ‚õî

---

## ‚ö†Ô∏è Known limitations (as of today)

* –ù–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±–∏–ª–ª–∏–Ω–≥–∞ –∏ –ø–ª–∞—Ç–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤.
* Trial-–ª–∏–º–∏—Ç—ã –¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ jobs –∏ cleaners.
* Mobile camera UX —Ç—Ä–µ–±—É–µ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏.
* Locations –±–µ–∑ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ñ–∏—á.
* **Email-–¥–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ SMTP (`EMAIL_BACKEND`)**:

  * –ª–æ–≥–∏–∫–∞ –∏ UX —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é
  * —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

---

## –ò—Ç–æ–≥ ‚Äî –∫–æ—Ä–æ—Ç–∫–æ –∏ —á–µ—Å—Ç–Ω–æ

* Reports v2 **—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é**:

  * –≤—ã–±–æ—Ä email
  * —Ä–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
  * –∞—É–¥–∏—Ç –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
* –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—Ç—á—ë—Ç–æ–≤ –∑–∞–∫—Ä—ã—Ç–∞ –±–µ–∑ –∫–æ—Å—Ç—ã–ª–µ–π.
* –ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ **–≥–æ—Ç–æ–≤–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ SaaS –±–µ–∑ –±–∏–ª–ª–∏–Ω–≥–∞**, –Ω–æ —Å —Ä–µ–∞–ª—å–Ω–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç—å—é.

---

## –ò—Ç–æ–≥ ‚Äî –∫–æ—Ä–æ—Ç–∫–æ –∏ —á–µ—Å—Ç–Ω–æ

* –°–ª–æ–π 0 ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç ‚úÖ
* –°–ª–æ–π 1 ‚Äî —Ä–∞–±–æ—á–∏–π MVP üü°
* –°–ª–æ–π 2 ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–±–∏–ª–µ–Ω ‚úÖ
* –°–ª–æ–π 3 ‚Äî –≥–æ—Ç–æ–≤ –∫ –±–∏–ª–ª–∏–Ω–≥—É, –Ω–æ –±–µ–∑ –ø–ª–∞—Ç–µ–∂–µ–π
* –°–ª–æ–∏ 4‚Äì5 ‚Äî –±–∞–∑–æ–≤—ã–µ –∑–∞–≥–æ—Ç–æ–≤–∫–∏, –Ω–æ Performance / Reports —É–∂–µ –¥–∞—é—Ç —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å ‚úÖ

üëâ **–ü—Ä–æ–µ–∫—Ç ‚Äî —É—Å—Ç–æ–π—á–∏–≤—ã–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∫–∞—á–µ—Å—Ç–≤–∞ (micro-SLA v1 + reason codes), trial-–æ–Ω–±–æ—Ä–¥–∏–Ω–≥–æ–º –∏ self-serve signup, –Ω–æ –±–µ–∑ –±–∏–ª–ª–∏–Ω–≥–∞.**
